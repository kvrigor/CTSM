$CTSMROOT/README                                          06/08/2018

##################################################################
Modified Community Land Surface Model (CLM) science version 5.0.0 
Modifications to the model code include: 
(1) Addition of several CFTs to source code files for active simulation (as opposed to being merged into other CFTs)
(2) Addition of winter wheat subroutines after Lu et al. (2017): https://doi.org/10.5194/gmd-10-1873-2017
(3) Addition of cover cropping subroutine that allows multiple crop types on the same column within one year 

For additional information and results please see the Boas et al. (submitted):  

Boas, T., Bogena, H., Gr√ºnwald, T., Heinesch, B., Ryu, D., Schmidt, M., Vereecken, H., Western, A., Hendricks-Franssen, H.-J. (submitted): Improving the representation of cropland sites in the Community Land Model (CLM) version 5.0. Geoscientific Model Development (submitted)

Abstract: 

The incorporation of a comprehensive crop module in land surface models offers the possibility to study the effect of agricultural land use and land management changes on the terrestrial water, energy and biogeochemical cycles. It may help to improve the simulation of biogeophysical and biogeochemical processes on regional and global scales in the framework of climate and land use change. In this study, the performance of the crop module of the Community Land Model version 5 (CLM5) was evaluated at point scale with site specific field data focussing on the simulation of seasonal and inter-annual variations in crop growth, planting and harvesting cycles, and crop yields as well as water, energy and carbon fluxes. In order to better represent agricultural sites, the model was modified by (1) implementing the winter wheat subroutines after Lu et al. (2017) in CLM5; (2) implementing plant specific parameters for sugar beet, potatoes, winter wheat and rapeseed, thereby adding these crop functional types (CFT) to the list of actively managed crops in CLM5; (3) introducing a cover cropping subroutine that allows multiple crop types on the same column within one year. The latter modification allows the simulation of cropping during winter months before usual cash crop planting begins in spring, which is a common agricultural management technique in humid and sub-humid regions. We compared simulation results with field data and found that both the parameterization of the CFTs, as well as the winter wheat subroutines, led to a significant simulation improvement in terms of energy fluxes, leaf area index, net ecosystem exchange (RMSE reduction for latent and sensible heat by up to 57 % and 59 % respectively) and crop yield (up to 87 % improvement in winter wheat yield prediction) compared with default model results. The cover cropping subroutine yielded a substantial improvement in representation of field conditions after harvest of the main cash crop (winter season) in terms of LAI curve and latent heat flux (reduction of winter time RMSE for latent heat flux by 42 %). We anticipate that our model modifications offer opportunities to improve yield predictions, to study the effects of large-scale cover cropping on energy fluxes, soil carbon and nitrogen pools, and soil water storage in future studies with CLM5. 
########################################################################

Community Land Surface Model (CLM) science version 5.0.0  series -- source code, tools, 
offline-build and test scripts. This gives you everything you need
to run CLM with CESM with datm8 to provide CRU NCEP or GSWP3 forcing data in 
place of a modeled atmosphere.

For lists of current bugs (issues) and current development see the CTSM GitHub page:

https://github.com/ESCOMP/ctsm

IMPORTANT NOTE ON CESM CHECKOUT VERSUS A CTSM CHECKOUT:

If this is the top level directory from making a clone of CTSM the 
directory structure is a little bit different than if CTSM is from 
a clone of the entire CESM. If this is part of CESM this directory
will be under components/clm alongside other CESM component models.
For a CTSM checkout this will be the top level directory.

Other documentation will refer to $CTSMROOT and it means the directory
that this file is at. CIMEROOT is the directory where "cime" is for
this checkout. For a CESM checkout $CIMEROOT will be the "cime" directory
beneath the top level directory. For a CTSM checkout $CIMEROOT will
be $CTSMROOT/cime.

General directory structure ($CTSMROOT):

doc --------------- Documentation of CLM.
bld --------------- Template, configure and build-namelist scripts for clm.
src --------------- CLM Source code.
cime_config ------- Configuration files of cime for compsets and CLM settings
manage_externals -- Script to manage the external source directories

Directory structure only for a CTSM checkout:

components -------- Other active sub-components needed for CLM to run (river routing and land-ice models)

cime/scripts --------------- cesm/cime driver scripts

cime/src/drivers/mct/main ----------- CESM top level driver source code.
cime/src/drivers/mct/shr ------------ CESM top level driver shared code.
cime/src/components/data_comps/datm - CESM Data model version 8 source code.
cime/src/components/stub_comps/sice - CESM stub sea-ice model source code.
cime/src/components/stub_comps/socn - CESM stub ocean model source code.
cime/src/components/stub_comps/sglc - CESM stub glacier model source code.
cime/src/externals ------------------ CESM external utility codes 
                                      (Model Coupling Toolkit (MCT)
                                      (Earth System Model Framework)
                                      (timing -- code timing utility)
                                      (pio -- Parallel Input/Output)
components/cism --------------------- CESM Community land Ice Sheet Model.
components/mosart ------------------- Model for Scale Adaptive River Transport
components/rtm ---------------------- CESM River Transport Model.

Top level documentation ($CTSMROOT):

README ------------------- This file
README.rst --------------- File that displays under the project in github
README_EXTERNALS.rst ----- Information on how to work with subversion externals for clm
CODE_OF_CONDUCT.md ------- Code of Conduct for how to work with each other on the CTSM project
Copyright ---------------- CESM Copyright file
doc/UpdateChangeLog.pl ------- Script to add documentation on a tag to the
                           ChangeLog/ChangeSum files
doc/ChangeLog ---------------- Documents different CLM versions
doc/ChangeSum ---------------- Summary documentation of different CLM versions

Documentation of Namelist Items: (view the following in a web browser)

bld/namelist_files/namelist_definition.xml --- Definition of all namelist items
bld/namelist_files/namelist_defaults_clm4_5.xml - Default values for CLM4.5/CLM5.0

=============================================================================================
Important files in main directories (under $CTSMROOT):
=============================================================================================

Externals.cfg --------------- File for management of the main high level externals
Externals_CLM.cfg ----------- File for management of the CLM specific externals (i.e. FATES)
parse_cime.cs.status -------- Script to parse test status files cs.status.* created by create_test
doc/Quickstart.GUIDE -------- Quick guide to using cpl7 scripts.
doc/IMPORTANT_NOTES --------- Some important notes about this version of 
                                                 clm, configuration modes and namelist items 
                                                 that are not validated or functional.
doc/ChangeLog --------------- Detailed list of changes for each model version.
doc/ChangeSum --------------- Summary one-line list of changes for each 
                              model version.
doc/README ------------------ Documentation similar to this file
doc/UsersGuide -------------- CLM Users Guide
doc/CodeReference ----------- CLM Code Reference Guide

bld/README ------------------ Description of how to use the configure and
                              build-namelist scripts.
bld/configure --------------- Script to prepare CLM to be built.
bld/build-namelist ---------- Script to build CLM namelists.

cime_config/buildnml ------------- Build the CLM namelist for CIME
cime_config/buildlib ------------- Build the CLM library
cime_config/config_compsets.xml -- Define CLM compsets
cime_config/config_component.xml - Define CLM XML settings
cime_config/config_tests.xml ----- Define CLM specific tests 
cime_config/config_pes.xml ------- Define Processor layouts for various CLM grids and compsets
cime_config/testdefs ------------- Directory for specification of CLM testing
cime_config/testdefs/ExpectedTestFails.xml -- List of tests that are expected to fail
cime_config/usermods_dirs -------- Directories of sets of user-modification subdirs
                                   (These are directories that add specific user modifications to
                                    simulations created using "cime/scripts/create_newcase --user-mods-dir".
                                    Current sub directories are for various CMIP6 configurations)

=============================================================================================
Source code directory structure:
=============================================================================================

src/biogeochem ---- Biogeochemisty
src/main ---------- Main control and high level code
src/cpl ----------- Land model high level MCT and ESMF drivers
src/biogeophys ---- Biogeophysics (Hydrology)
src/dyn_subgrid --- Dynamic land unit change
src/init_interp --- Online interpolation
scr/fates --------- FATES model and sub-directories 
                    Functionally Assembled Terrestrial Ecosystem Simulator (FATES)
                    Experimental Ecosystem Demography model
src/utils --------- Utility codes
src/unit_test_shr - Unit test shared modules for unit testing
src/unit_test_stubs Unit test stubs that replicate CTSM code simpler

src_clm40 --------- CLM4.0 source code directory

=============================================================================================
    QUICKSTART: using the CPL7 scripts
=============================================================================================

         cd $CIMEROOT/scripts
         ./create_newcase            # get help on how to run create_newcase
         ./create_newcase --case testI --res f19_g17_gl4 --compset I2000Clm50BgcCrop
                                     # create new "I" case for default machine at 1.9x2.5_gx1v7 
                                     # with 4km greenland ice sheetres resolution
                                     # "I2000Clm50BgcCrop" case is clm5_0 active, datm8, and inactive ice/ocn
                                     # With no-evolve ice-sheet, and MOSART for river-routing
         cd testI
         ./case.setup                # create the $CASE.run file
         ./case.build                # build model and create namelists
         ./case.submit               # submit script
                                     # (NOTE: ./xmlchange RESUBMIT=10 to set RESUBMIT to number
                                     # #  of times to automatically resubmit -- 10 in this example)

